// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  // output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  // url      = env("DATABASE_URL")
}

// ============================================
// USER MANAGEMENT
// ============================================

enum UserRole {
  SUPER_ADMIN // Core platform admin
  INSTITUTE_ADMIN // Institute creator/admin
  TEACHER // Course instructor
  STUDENT // Learner
}

enum UserStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
  PENDING_VERIFICATION
}

model User {
  id            String     @id @default(uuid())
  email         String     @unique
  password      String
  firstName     String
  lastName      String
  phoneNumber   String?    @unique
  avatar        String?
  role          UserRole
  status        UserStatus @default(PENDING_VERIFICATION)
  emailVerified Boolean    @default(false)
  lastLogin     DateTime?
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt

  // Relationships
  studentProfile Student?
  teacherProfile Teacher?
  instituteAdmin InstituteAdmin?
  superAdmin     SuperAdmin?

  // Activity tracking
  notifications    Notification[]
  messages         Message[]      @relation("SentMessages")
  receivedMessages Message[]      @relation("ReceivedMessages")
  activityLogs     ActivityLog[]

  @@index([email])
  @@index([role])
}

model SuperAdmin {
  id     String @id @default(uuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  dashboardAccess Json? // Custom permissions
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}

// ============================================
// INSTITUTE MANAGEMENT
// ============================================

enum InstituteType {
  SCHOOL
  COLLEGE
  COACHING_CENTER
  PRIVATE_TUITION
  COURSE_PROVIDER
  UNIVERSITY
}

enum InstituteStatus {
  ACTIVE
  INACTIVE
  PENDING_APPROVAL
  SUSPENDED
}

model Institute {
  id           String          @id @default(uuid())
  name         String
  code         String          @unique
  type         InstituteType
  status       InstituteStatus @default(PENDING_APPROVAL)
  logo         String?
  description  String?
  website      String?
  contactEmail String
  contactPhone String
  address      String?
  city         String?
  state        String?
  country      String          @default("India")
  zipCode      String?

  // Settings
  settings Json? // Custom institute settings

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  admins        InstituteAdmin[]
  students      Student[]
  teachers      Teacher[]
  classes       Class[]
  courses       Course[]         @relation("InstituteCourses")
  announcements Announcement[]
  events        Event[]

  @@index([code])
  @@index([type])
  @@index([status])
}

model InstituteAdmin {
  id          String    @id @default(uuid())
  userId      String    @unique
  user        User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  instituteId String
  institute   Institute @relation(fields: [instituteId], references: [id], onDelete: Cascade)

  isCreator   Boolean @default(false)
  permissions Json? // Custom permissions

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([instituteId])
}

// ============================================
// STUDENT MANAGEMENT
// ============================================

model Student {
  id     String @id @default(uuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  studentId   String     @unique // Institute-specific ID
  instituteId String?
  institute   Institute? @relation(fields: [instituteId], references: [id], onDelete: SetNull)

  dateOfBirth    DateTime?
  guardianName   String?
  guardianPhone  String?
  guardianEmail  String?
  address        String?
  enrollmentDate DateTime  @default(now())

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  enrollments     CourseEnrollment[]
  classStudents   ClassStudent[]
  assignments     AssignmentSubmission[]
  examAttempts    ExamAttempt[]
  quizAttempts    QuizAttempt[]
  results         Result[]
  progress        StudentProgress[]
  attendance      Attendance[]
  dailyActivities DailyActivity[]
  lessonProgress  LessonProgress[]

  @@index([studentId])
  @@index([instituteId])
  @@index([userId])
}

// ============================================
// TEACHER MANAGEMENT
// ============================================

model Teacher {
  id     String @id @default(uuid())
  userId String @unique
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  teacherId   String     @unique
  instituteId String?
  institute   Institute? @relation(fields: [instituteId], references: [id], onDelete: SetNull)

  subjects       String[] // Array of subjects
  qualification  String?
  experience     Int? // Years of experience
  specialization String?
  bio            String?

  isVerified Boolean  @default(false)
  joinDate   DateTime @default(now())

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  courses     CourseTeacher[]
  classes     ClassTeacher[]
  lessons     Lesson[]
  assignments Assignment[]
  exams       Exam[]
  quizzes     Quiz[]

  @@index([teacherId])
  @@index([instituteId])
}

// ============================================
// CLASS MANAGEMENT
// ============================================

enum Grade {
  GRADE_1
  GRADE_2
  GRADE_3
  GRADE_4
  GRADE_5
  GRADE_6
  GRADE_7
  GRADE_8
  GRADE_9
  GRADE_10
  GRADE_11
  GRADE_12
  UNDERGRADUATE
  POSTGRADUATE
  OTHER
}

model Class {
  id           String  @id @default(uuid())
  name         String // e.g., "1A", "2A", "3C"
  grade        Grade
  section      String?
  capacity     Int
  academicYear String // e.g., "2024/25"

  instituteId String
  institute   Institute @relation(fields: [instituteId], references: [id], onDelete: Cascade)

  supervisorId String? // Main class teacher

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  students      ClassStudent[]
  teachers      ClassTeacher[]
  courses       ClassCourse[]
  announcements Announcement[]
  events        Event[]
  attendance    Attendance[]

  @@index([instituteId])
  @@index([academicYear])
}

model ClassStudent {
  id        String  @id @default(uuid())
  classId   String
  class     Class   @relation(fields: [classId], references: [id], onDelete: Cascade)
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)

  rollNumber Int?
  joinedAt   DateTime  @default(now())
  leftAt     DateTime?

  @@unique([classId, studentId])
  @@index([classId])
  @@index([studentId])
}

model ClassTeacher {
  id        String  @id @default(uuid())
  classId   String
  class     Class   @relation(fields: [classId], references: [id], onDelete: Cascade)
  teacherId String
  teacher   Teacher @relation(fields: [teacherId], references: [id], onDelete: Cascade)

  isPrimary  Boolean  @default(false)
  assignedAt DateTime @default(now())

  @@unique([classId, teacherId])
  @@index([classId])
  @@index([teacherId])
}

// ============================================
// COURSE MANAGEMENT
// ============================================

enum CourseType {
  INSTITUTE_SPECIFIC // For institute students only
  PUBLIC // Available to all platform users
  PREMIUM // Paid courses
  FREE // Free courses
}

enum CourseLevel {
  BEGINNER
  INTERMEDIATE
  ADVANCED
  EXPERT
}

enum CourseStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
  UNDER_REVIEW
}

model Course {
  id          String  @id @default(uuid())
  title       String
  code        String  @unique
  description String?
  thumbnail   String?

  type   CourseType
  level  CourseLevel
  status CourseStatus @default(DRAFT)

  // Pricing
  price         Float  @default(0)
  currency      String @default("INR")
  discountPrice Float?

  // Course details
  duration      Int? // In hours
  language      String   @default("English")
  category      String
  tags          String[]
  prerequisites String[]

  // For institute courses
  instituteId String?
  institute   Institute? @relation("InstituteCourses", fields: [instituteId], references: [id], onDelete: Cascade)

  // Visibility
  isPublic Boolean @default(false)

  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  publishedAt DateTime?

  // Relationships
  enrollments CourseEnrollment[]
  teachers    CourseTeacher[]
  modules     CourseModule[]
  assignments Assignment[]
  exams       Exam[]
  quizzes     Quiz[]
  resources   StudyMaterial[]
  reviews     CourseReview[]
  classes     ClassCourse[]

  @@index([code])
  @@index([type])
  @@index([status])
  @@index([instituteId])
}

model ClassCourse {
  id       String @id @default(uuid())
  classId  String
  class    Class  @relation(fields: [classId], references: [id], onDelete: Cascade)
  courseId String
  course   Course @relation(fields: [courseId], references: [id], onDelete: Cascade)

  startDate DateTime
  endDate   DateTime?

  @@unique([classId, courseId])
  @@index([classId])
  @@index([courseId])
}

model CourseTeacher {
  id        String  @id @default(uuid())
  courseId  String
  course    Course  @relation(fields: [courseId], references: [id], onDelete: Cascade)
  teacherId String
  teacher   Teacher @relation(fields: [teacherId], references: [id], onDelete: Cascade)

  role       String   @default("Instructor") // Instructor, Co-instructor, TA
  assignedAt DateTime @default(now())

  @@unique([courseId, teacherId])
  @@index([courseId])
  @@index([teacherId])
}

model CourseEnrollment {
  id        String  @id @default(uuid())
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
  courseId  String
  course    Course  @relation(fields: [courseId], references: [id], onDelete: Cascade)

  enrolledAt  DateTime  @default(now())
  completedAt DateTime?
  expiresAt   DateTime?

  progress Float  @default(0) // 0-100%
  status   String @default("ACTIVE") // ACTIVE, COMPLETED, DROPPED

  // Payment info (for paid courses)
  paymentId  String?
  amountPaid Float?

  @@unique([studentId, courseId])
  @@index([studentId])
  @@index([courseId])
  @@index([status])
}

model CourseModule {
  id       String @id @default(uuid())
  courseId String
  course   Course @relation(fields: [courseId], references: [id], onDelete: Cascade)

  title       String
  description String?
  orderIndex  Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  lessons Lesson[]

  @@index([courseId])
  @@index([orderIndex])
}

// ============================================
// LESSON MANAGEMENT
// ============================================

enum LessonType {
  VIDEO
  DOCUMENT
  PRESENTATION
  INTERACTIVE
  LIVE_CLASS
  QUIZ
}

model Lesson {
  id       String       @id @default(uuid())
  moduleId String
  module   CourseModule @relation(fields: [moduleId], references: [id], onDelete: Cascade)

  title       String
  description String?
  type        LessonType
  content     String? // URL or embedded content
  duration    Int? // In minutes
  orderIndex  Int

  teacherId String?
  teacher   Teacher? @relation(fields: [teacherId], references: [id], onDelete: SetNull)

  isFree      Boolean @default(false)
  isPublished Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  progress LessonProgress[]

  @@index([moduleId])
  @@index([orderIndex])
}

model LessonProgress {
  id        String  @id @default(uuid())
  lessonId  String
  lesson    Lesson  @relation(fields: [lessonId], references: [id], onDelete: Cascade)
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)

  isCompleted Boolean @default(false)
  progress    Float   @default(0) // 0-100%
  timeSpent   Int     @default(0) // In seconds

  startedAt      DateTime  @default(now())
  completedAt    DateTime?
  lastAccessedAt DateTime  @default(now())

  @@unique([lessonId, studentId])
  @@index([lessonId])
  @@index([studentId])
}

// ============================================
// ASSIGNMENT MANAGEMENT
// ============================================

enum AssignmentStatus {
  DRAFT
  PUBLISHED
  CLOSED
}

model Assignment {
  id          String @id @default(uuid())
  title       String
  description String

  courseId  String
  course    Course  @relation(fields: [courseId], references: [id], onDelete: Cascade)
  teacherId String
  teacher   Teacher @relation(fields: [teacherId], references: [id], onDelete: Cascade)

  dueDate      DateTime
  totalMarks   Float
  passingMarks Float

  attachments  String[] // URLs to files
  instructions String?

  status              AssignmentStatus @default(DRAFT)
  allowLateSubmission Boolean          @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  submissions AssignmentSubmission[]

  @@index([courseId])
  @@index([teacherId])
  @@index([dueDate])
}

enum SubmissionStatus {
  SUBMITTED
  GRADED
  LATE
  PENDING
}

model AssignmentSubmission {
  id           String     @id @default(uuid())
  assignmentId String
  assignment   Assignment @relation(fields: [assignmentId], references: [id], onDelete: Cascade)
  studentId    String
  student      Student    @relation(fields: [studentId], references: [id], onDelete: Cascade)

  content     String?
  attachments String[] // URLs to submitted files

  submittedAt DateTime         @default(now())
  status      SubmissionStatus @default(SUBMITTED)

  // Grading
  marksObtained Float?
  feedback      String?
  gradedAt      DateTime?

  @@unique([assignmentId, studentId])
  @@index([assignmentId])
  @@index([studentId])
  @@index([status])
}

// ============================================
// EXAM MANAGEMENT
// ============================================

enum ExamType {
  MIDTERM
  FINAL
  UNIT_TEST
  MOCK_TEST
  PRACTICE_TEST
}

model Exam {
  id          String  @id @default(uuid())
  title       String
  description String?

  courseId  String
  course    Course  @relation(fields: [courseId], references: [id], onDelete: Cascade)
  teacherId String
  teacher   Teacher @relation(fields: [teacherId], references: [id], onDelete: Cascade)

  type         ExamType
  scheduledAt  DateTime
  duration     Int // In minutes
  totalMarks   Float
  passingMarks Float

  instructions String?
  isPublished  Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  questions ExamQuestion[]
  attempts  ExamAttempt[]

  @@index([courseId])
  @@index([teacherId])
  @@index([scheduledAt])
}

model ExamQuestion {
  id     String @id @default(uuid())
  examId String
  exam   Exam   @relation(fields: [examId], references: [id], onDelete: Cascade)

  questionText  String
  questionType  String // MCQ, TRUE_FALSE, SHORT_ANSWER, ESSAY
  options       Json? // For MCQ
  correctAnswer String?
  marks         Float
  orderIndex    Int

  @@index([examId])
  @@index([orderIndex])
}

model ExamAttempt {
  id        String  @id @default(uuid())
  examId    String
  exam      Exam    @relation(fields: [examId], references: [id], onDelete: Cascade)
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)

  startedAt   DateTime  @default(now())
  submittedAt DateTime?

  answers       Json // Student's answers
  marksObtained Float?
  isGraded      Boolean @default(false)

  @@index([examId])
  @@index([studentId])
}

// ============================================
// QUIZ MANAGEMENT
// ============================================

enum QuizType {
  DAILY_TRIVIA
  WEEKLY_PROGRESS
  TOPIC_QUIZ
  PRACTICE_QUIZ
}

model Quiz {
  id          String  @id @default(uuid())
  title       String
  description String?

  courseId  String
  course    Course  @relation(fields: [courseId], references: [id], onDelete: Cascade)
  teacherId String
  teacher   Teacher @relation(fields: [teacherId], references: [id], onDelete: Cascade)

  type         QuizType
  duration     Int? // In minutes, null for untimed
  totalMarks   Float
  passingMarks Float?

  isPublished Boolean   @default(false)
  scheduledAt DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relationships
  questions QuizQuestion[]
  attempts  QuizAttempt[]

  @@index([courseId])
  @@index([type])
  @@index([scheduledAt])
}

model QuizQuestion {
  id     String @id @default(uuid())
  quizId String
  quiz   Quiz   @relation(fields: [quizId], references: [id], onDelete: Cascade)

  questionText  String
  questionType  String // MCQ, TRUE_FALSE, SHORT_ANSWER
  options       Json? // For MCQ
  correctAnswer String
  explanation   String?
  marks         Float
  orderIndex    Int

  @@index([quizId])
  @@index([orderIndex])
}

model QuizAttempt {
  id        String  @id @default(uuid())
  quizId    String
  quiz      Quiz    @relation(fields: [quizId], references: [id], onDelete: Cascade)
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)

  startedAt   DateTime  @default(now())
  submittedAt DateTime?

  answers       Json
  marksObtained Float
  isPassed      Boolean @default(false)

  @@index([quizId])
  @@index([studentId])
}

// ============================================
// STUDY MATERIALS
// ============================================

enum MaterialType {
  PDF
  VIDEO
  DOCUMENT
  PRESENTATION
  LINK
  EBOOK
}

model StudyMaterial {
  id          String       @id @default(uuid())
  title       String
  description String?
  type        MaterialType
  fileUrl     String
  fileSize    Int? // In bytes

  courseId String
  course   Course @relation(fields: [courseId], references: [id], onDelete: Cascade)

  isPublic   Boolean  @default(false)
  uploadedAt DateTime @default(now())

  @@index([courseId])
  @@index([type])
}

// ============================================
// RESULTS & PROGRESS TRACKING
// ============================================

model Result {
  id        String  @id @default(uuid())
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)

  courseId     String?
  examId       String?
  assignmentId String?

  subjectName String
  subjectCode String

  marksObtained Float
  totalMarks    Float
  percentage    Float
  grade         String?

  examDate   DateTime
  resultDate DateTime

  remarks String?

  @@index([studentId])
  @@index([subjectCode])
  @@index([examDate])
}

model StudentProgress {
  id        String  @id @default(uuid())
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
  courseId  String

  totalLessons         Int
  completedLessons     Int
  totalAssignments     Int
  completedAssignments Int
  totalQuizzes         Int
  completedQuizzes     Int

  overallProgress Float @default(0) // 0-100%
  averageScore    Float @default(0)

  lastUpdated DateTime @updatedAt

  @@unique([studentId, courseId])
  @@index([studentId])
  @@index([courseId])
}

// ============================================
// ATTENDANCE TRACKING
// ============================================

enum AttendanceStatus {
  PRESENT
  ABSENT
  LATE
  EXCUSED
}

model Attendance {
  id        String  @id @default(uuid())
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)
  classId   String
  class     Class   @relation(fields: [classId], references: [id], onDelete: Cascade)

  date    DateTime
  status  AttendanceStatus
  remarks String?

  markedAt DateTime @default(now())

  @@unique([studentId, classId, date])
  @@index([studentId])
  @@index([classId])
  @@index([date])
}

// ============================================
// DAILY ACTIVITY (GitHub-style Calendar)
// ============================================

model DailyActivity {
  id        String  @id @default(uuid())
  studentId String
  student   Student @relation(fields: [studentId], references: [id], onDelete: Cascade)

  date DateTime

  lessonsCompleted     Int @default(0)
  quizzesAttempted     Int @default(0)
  assignmentsSubmitted Int @default(0)
  timeSpent            Int @default(0) // In minutes
  pointsEarned         Int @default(0)

  activityScore Float @default(0) // 0-100, for color intensity

  @@unique([studentId, date])
  @@index([studentId])
  @@index([date])
}

// ============================================
// ANNOUNCEMENTS & EVENTS
// ============================================

enum AnnouncementTarget {
  ALL_STUDENTS
  SPECIFIC_CLASS
  SPECIFIC_COURSE
  INSTITUTE_WIDE
  PLATFORM_WIDE
}

model Announcement {
  id      String @id @default(uuid())
  title   String
  content String

  target      AnnouncementTarget
  instituteId String?
  institute   Institute?         @relation(fields: [instituteId], references: [id], onDelete: Cascade)
  classId     String?
  class       Class?             @relation(fields: [classId], references: [id], onDelete: SetNull)

  isPinned    Boolean   @default(false)
  publishedAt DateTime  @default(now())
  expiresAt   DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([instituteId])
  @@index([classId])
  @@index([publishedAt])
}

model Event {
  id          String  @id @default(uuid())
  title       String
  description String?

  instituteId String?
  institute   Institute? @relation(fields: [instituteId], references: [id], onDelete: Cascade)
  classId     String?
  class       Class?     @relation(fields: [classId], references: [id], onDelete: SetNull)

  startTime   DateTime
  endTime     DateTime
  location    String?
  isVirtual   Boolean  @default(false)
  meetingLink String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([instituteId])
  @@index([classId])
  @@index([startTime])
}

// ============================================
// MESSAGING SYSTEM
// ============================================

model Message {
  id         String @id @default(uuid())
  senderId   String
  sender     User   @relation("SentMessages", fields: [senderId], references: [id], onDelete: Cascade)
  receiverId String
  receiver   User   @relation("ReceivedMessages", fields: [receiverId], references: [id], onDelete: Cascade)

  subject     String?
  content     String
  attachments String[]

  isRead Boolean   @default(false)
  readAt DateTime?

  sentAt DateTime @default(now())

  @@index([senderId])
  @@index([receiverId])
  @@index([isRead])
  @@index([sentAt])
}

// ============================================
// NOTIFICATION SYSTEM
// ============================================

enum NotificationType {
  ANNOUNCEMENT
  ASSIGNMENT
  EXAM
  RESULT
  MESSAGE
  COURSE_UPDATE
  SYSTEM
  ATTENDANCE
}

model Notification {
  id     String @id @default(uuid())
  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  type    NotificationType
  title   String
  content String
  link    String?

  isRead Boolean   @default(false)
  readAt DateTime?

  createdAt DateTime @default(now())

  @@index([userId])
  @@index([isRead])
  @@index([createdAt])
}

// ============================================
// COURSE REVIEWS & RATINGS
// ============================================

model CourseReview {
  id        String @id @default(uuid())
  courseId  String
  course    Course @relation(fields: [courseId], references: [id], onDelete: Cascade)
  studentId String

  rating Float // 1-5
  review String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([courseId, studentId])
  @@index([courseId])
  @@index([rating])
}

// ============================================
// ACTIVITY LOGGING
// ============================================

enum ActivityType {
  LOGIN
  LOGOUT
  COURSE_ENROLLMENT
  LESSON_COMPLETED
  ASSIGNMENT_SUBMITTED
  EXAM_ATTEMPTED
  QUIZ_ATTEMPTED
  PROFILE_UPDATED
  PASSWORD_CHANGED
}

model ActivityLog {
  id     String @id @default(uuid())
  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  activityType ActivityType
  description  String
  metadata     Json?

  ipAddress String?
  userAgent String?

  createdAt DateTime @default(now())

  @@index([userId])
  @@index([activityType])
  @@index([createdAt])
}

// ============================================
// PLATFORM STATISTICS (for Super Admin)
// ============================================

model PlatformStats {
  id String @id @default(uuid())

  date DateTime @unique

  totalUsers      Int @default(0)
  totalStudents   Int @default(0)
  totalTeachers   Int @default(0)
  totalInstitutes Int @default(0)
  totalCourses    Int @default(0)

  activeUsers      Int   @default(0)
  newEnrollments   Int   @default(0)
  revenueGenerated Float @default(0)

  createdAt DateTime @default(now())

  @@index([date])
}
